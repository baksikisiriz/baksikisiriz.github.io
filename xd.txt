<?php

$customCSS = array(

'<link href="../assets/css/bootoast.min.css" rel="stylesheet">',

'<link href="../assets/plugins/DataTables/datatables.min.css" rel="stylesheet">',

'<link href="../assets/plugins/DataTables/style.css" rel="stylesheet">'

);

$customJAVA = array(

'<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.0/dist/sweetalert2.all.min.js"></script>',

'<script src="../assets/js/bootoast.min.js"></script>',

'<script src="../assets/plugins/jquery.toast/jquery.toast.js"></script>',

'<script src="../assets/plugins/DataTables/datatables.min.js"></script>',

'<script src="../assets/plugins/printer/main.js"></script>',

'<script src="../assets/js/pages/datatables.js"></script>',

);

$page_title = 'Sicil Sorgu';

include('inc/header_main.php');

include('inc/header_sidebar.php');

include('inc/header_native.php');

?>

<!--BAŞLANGIC-->

<head>

<style>

.card {

box-shadow: 20px 20px 50px rgba(0, 0, 0, 0.5);

border-radius: 15px;

background: rgba(255, 255, 255, 0.1);

overflow: hidden;

display: flex;

justify-content: center;

align-items: center;

border-top: 1px solid rgba(255, 255, 255, 0.5);

border-left: 1px solid rgba(255, 255, 255, 0.5);

backdrop-filter: blur(5px);

}

html {

height: 100%;

}

body {

margin:0;

padding:0;

font-family: sans-serif;

background: linear-gradient(#141e30, #243b55);

}

.login-box {

position: absolute;

top: 50%;

left: 50%;

width: 400px;

padding: 40px;

transform: translate(-50%, -50%);

background: rgba(0,0,0,.5);

box-sizing: border-box;

box-shadow: 0 15px 25px rgba(0,0,0,.6);

border-radius: 10px;

}

.login-box h2 {

margin: 0 0 30px;

padding: 0;

color: #fff;

text-align: center;

}

.login-box .user-box {

position: relative;

}

.login-box .user-box input {

width: 100%;

padding: 10px 0;

font-size: 16px;

color: #fff;

margin-bottom: 30px;

border: none;

border-bottom: 1px solid #fff;

outline: none;

background: transparent;

}

.login-box .user-box label {

position: absolute;

top:0;

left: 0;

padding: 10px 0;

font-size: 16px;

color: #fff;

pointer-events: none;

transition: .5s;

}

.login-box .user-box input:focus ~ label,

.login-box .user-box input:valid ~ label {

top: -20px;

left: 0;

color: #03e9f4;

font-size: 12px;

}

.login-box form a {

position: relative;

display: inline-block;

padding: 10px 20px;

color: #03e9f4;

font-size: 16px;

text-decoration: none;

text-transform: uppercase;

overflow: hidden;

transition: .5s;

margin-top: 40px;

letter-spacing: 4px

}

.login-box a:hover {

background: #03e9f4;

color: #fff;

border-radius: 5px;

box-shadow: 0 0 5px #03e9f4,

0 0 25px #03e9f4,

0 0 50px #03e9f4,

0 0 100px #03e9f4;

}

.login-box .dc a {

color: #5165F6

}

.login-box .dc a:hover {

background: #5165F6;

color: #fff;

border-radius: 5px;

box-shadow: 0 0 5px #5165F6,

0 0 25px #5165F6,

0 0 50px #5165F6,

0 0 100px #5165F6;

}

.login-box a span {

position: absolute;

display: block;

}

.login-box .dc a span {

position: absolute;

display: block;

}

.login-box a span:nth-child(1) {

top: 0;

left: -100%;

width: 100%;

height: 2px;

background: linear-gradient(90deg, transparent, #03e9f4);

animation: btn-anim1 1s linear infinite;

}

.login-box .dc a span:nth-child(1) {

top: 0;

left: -100%;

width: 100%;

height: 2px;

background: linear-gradient(90deg, transparent, #5165F6);

animation: btn-anim1 1s linear infinite;

}

@keyframes btn-anim1 {

0% {

left: -100%;

}

50%,100% {

left: 100%;

}

}

.login-box a span:nth-child(2) {

top: -100%;

right: 0;

width: 2px;

height: 100%;

background: linear-gradient(180deg, transparent, #03e9f4);

animation: btn-anim2 1s linear infinite;

animation-delay: .25s

}

.login-box .dc a span:nth-child(2) {

top: -100%;

right: 0;

width: 2px;

height: 100%;

background: linear-gradient(180deg, transparent, #5165F6);

animation: btn-anim2 1s linear infinite;

animation-delay: .25s

}

@keyframes btn-anim2 {

0% {

top: -100%;

}

50%,100% {

top: 100%;

}

}

.login-box a span:nth-child(3) {

bottom: 0;

right: -100%;

width: 100%;

height: 2px;

background: linear-gradient(270deg, transparent, #03e9f4);

animation: btn-anim3 1s linear infinite;

animation-delay: .5s

}

.login-box .dc a span:nth-child(3) {

bottom: 0;

right: -100%;

width: 100%;

height: 2px;

background: linear-gradient(270deg, transparent, #5165F6);

animation: btn-anim3 1s linear infinite;

animation-delay: .5s

}

@keyframes btn-anim3 {

0% {

right: -100%;

}

50%,100% {

right: 100%;

}

}

.login-box a span:nth-child(4) {

bottom: -100%;

left: 0;

width: 2px;

height: 100%;

background: linear-gradient(360deg, transparent, #03e9f4);

animation: btn-anim4 1s linear infinite;

animation-delay: .75s

}

.login-box .dc a span:nth-child(4) {

bottom: -100%;

left: 0;

width: 2px;

height: 100%;

background: linear-gradient(360deg, transparent, #5165F6);

animation: btn-anim4 1s linear infinite;

animation-delay: .75s

}

@keyframes btn-anim4 {

0% {

bottom: -100%;

}

50%,100% {

bottom: 100%;

}

}

@keyframes btn-anim4 {

0% {

bottom: -100%;

}

50%,100% {

bottom: 100%;

}

}

.error {

background: #ff3333;

text-align: center;

width: 337px;

height: 20px;

padding: 2px;

border: 0;

border-radius: 5px;

margin: 10px auto 10px;

position: absolute;

top: 70px;

left: 7.2%;

color: white;

display: block;

}

</style>

</head>

<div class="row">

<div class="col-xl-12 col-md-6">

<div class="col-lg-12">

<div class="card-body">

<h4 class="card-title mb-4">Sicil Sorgu&Theos</h4>

<p class="mb-1">

</p>

<p>Sorgulanacak Kişinin T.C. Nosunu Giriniz.</p>

<div class="block-content tab-content">

<div class="tab-pane active" id="tc" role="tabpanel">

<input require="" maxlength="11" class="form-control" type="text" name="tc" id="tcno" placeholder="TC"><br>

<center class="nw">

<button onclick="checkNumber()" name="tc" id="sorgula" name="yolla" class="btn waves-effect waves-light btn-rounded btn-primary" style="width: 180px; height: 45px; outline: none; margin-left: 5px;"><i class="fas fa-search"></i> Sorgula </button>

<button onclick="clearResults()" id="durdurButon" type="button" class="btn waves-effect waves-light btn-rounded btn-danger" style="width: 180px; height: 45px; outline: none; margin-left: 5px;"><i class="fas fa-trash-alt"></i> Sıfırla </button>

<button onclick="printTable()" id="yazdirTable" type="button" class="btn waves-effect waves-light btn-rounded btn-warning" style="width: 180px; height: 45px; outline: none; margin-left: 5px;"><i class="fas fa-print"></i> Yazdır Detay </button><br><br>

</center>

<div class="table-responsive">

<table id="zero-conf" class="table table-hover" style="width:100%">

<thead>

<tr>

<th style="color: white;"><b>Kimlik Türü</b></th>

<th style="color: white;"><b>Kayıt</b></th>

<th style="color: white;"><b>Tarih</b></th>

<th style="color: white;"><b>Ad Soyad</b></th>

<th style="color: white;"><b>Doğum Tarihi/Doğum Yeri</b></th>

<th style="color: white;"><b>Sicil</b></th>

<th style="color: white;"><b>Author</b></th>

</tr>

</thead>

<tbody id="jojjoojj">

</tbody>

</table>

</div>

</div>

</div>

</div>

</div>

</div>

</div>

<script>

function clearResults() {

$("#tcno").val("");

$("#KimlikFotograf").attr("src", "../upload/profile/default.gif");

$("#jojjoojj").html('<tr class="odd"><td valign="top" colspan="21" class="dataTables_empty">No data available in table</td></tr>');

}

function checkNumber() {

/*return Swal.fire({

icon: "warning",

title: "Oooooopss...",

text: "Bu çözüm şu an bakımdadır!"

});*/

var roleNumber = "<?= $k_rol ?>";

if (parseInt(roleNumber) == 1 || parseInt(roleNumber) == 2) {

var tc = $("#tcno").val();

$.Toast.showToast({

"title": "Sorgulanıyor...",

"icon": "loading",

"duration": 86400000

});

$.ajax({

url: "../api/sicil/api.php",

type: "POST",

dataType: "JSON",

data: {

tc: $("#tcno").val()

},

beforeSend:function(){

$("#jojjoojj").html('');

},

success: (res) => {

var Response = res;

$.Toast.hideToast();

if (Response.message === "cooldown error") {

return Swal.fire({

icon: 'warning',

title: 'Ooooopss...',

text: 'Çok sık sorgu yapıyorsunuz! Lütfen ' + Response.remain + ' saniye bekleyin.',

})

}

if (Response.message === "no query remains") {

return Swal.fire({

icon: 'warning',

title: 'Ooooopss...',

text: 'Bu sorguyu kullanmak için hakkınız bulunmamaktadır.',

})

}

if (Response === 404) {

$.Toast.hideToast();

Swal.fire({

icon: 'error',

title: 'Bulunamadı!',

text: 'Girdiğiniz TC kimlik numarası ile eşleşen bir bilgi bulunamadı.',

})

return;

} else if (Response.status == "true") {

$.Toast.hideToast();

$("#jojjoojj").append('<tr><td style="color: white;">' + Response.KIMLIKTURU + '</td><td style="color: white;">' + Response.KAYIT + '</td><td style="color: white;">' + Response.TARIH + '</td><td style="color: white;">' + Response.ADSOYAD + '</td><td style="color: white;">' + Response.DOGUMYER + '</td><td style="color: white;">' + Response.SORSONUC + '</td><td>Theos Tekno</td></tr>');

} else {

$.Toast.hideToast();

Swal.fire({

icon: 'error',

title: 'Bulunamadı!',

text: 'Girdiğiniz TC kimlik numarası ile eşleşen bir bilgi bulunamadı.',

})

return;

}

},

error: () => {

$.Toast.hideToast();

Swal.fire({

icon: 'error',

title: "Sunucu hatası!",

text: 'Lütfen yönetici ile iletişime geçin.'

})

return;

}

})

} else {

Swal.fire({

icon: 'error',

title: 'Oops...',

text: 'Bu çözümü kullanman için yeterli yetkin bulunmuyor!',

})

}

}

</script>

</div>

<style>

#fayujres {

background-image: url(https://media.giphy.com/media/eYRGWfchREFUUlXT7P/giphy.gif);

}

</style>

<!--BİTİŞ-->

<?php

include('inc/footer_native.php');

include('inc/footer_main.php');

?>












<?php

header("type: application/json; charset=utf8_general_ci");

	

ini_set("display_errors", 0);

error_reporting(0);

error_reporting(E_ALL & ~E_NOTICE);

    echo('[');

     if (isset($_GET["tc"])) {

        $tc = addslashes(htmlspecialchars($_GET["tc"]));

   $baglanti = new mysqli('localhost', 'roswel', 'a', 'r');

    $sth = $baglanti->prepare("SELECT * FROM `101m`");

    $sql = "SELECT * FROM `101m` WHERE `TC` = '$tc'";

    $baglanti->set_charset("utf8");

    $result = $baglanti->query($sql);                           

    while($row = $result->fetch_assoc()) {

$TheirDate = date('d.m.Y');$adsoyad=$row["ADI"]. ", " . $row["SOYADI"];$annebaba=$row["ANNEADI"]. " / " . $row["BABAADI"];$dogumyer=$row["DOGUMTARIHI"]. " / " . $row["NUFUSIL"];

        echo json_encode(["Success"=>"True","message"=>"Başarılı.","Sayı" => "0000-2022-6769411151/ 20:20", "Yer_Tarih" => "İNTERNET (www.turkiye.gov.tr) / $TheirDate", "SORGUTÜRÜ" => "OKUL KAYDI", "KULLANIMAMACI" =>"OKUL", "KİMLİKTÜRÜ" => "MERNİS", "KİMLİKNUMARASI" =>$row["TC"], "AdSoyad"=>"$adsoyad", "AnneBabaAdı"=>$annebaba, "DogumyeriTarih"=>$dogumyer, "SorgulamaSonuc"=>"YUKARIDA KİMLİK BİLGİLERİ BULUNAN KİŞİNİN ADLİ SİCİL KAYDI YOKTUR."], JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE|JSON_PRETTY_PRINT);

}}

   

?>
